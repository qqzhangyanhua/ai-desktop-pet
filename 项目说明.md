# AI Desktop Pet é¡¹ç›®è¯´æ˜æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**AI Desktop Pet** æ˜¯ä¸€ä¸ªåŸºäº Tauri + React + TypeScript æ„å»ºçš„æ™ºèƒ½æ¡Œé¢å® ç‰©åº”ç”¨ï¼Œé›†æˆäº† AI å¯¹è¯ã€Live2D åŠ¨ç”»ã€è¯­éŸ³äº¤äº’ã€ä»»åŠ¡è°ƒåº¦ç­‰å¤šé¡¹åŠŸèƒ½ï¼Œæ—¨åœ¨æ‰“é€ ä¸€ä¸ªèƒ½å¤Ÿ"æˆé•¿"çš„ AI ä¼´ä¾£ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **Live2D åŠ¨ç”»æ¸²æŸ“** - æ”¯æŒè‡ªå®šä¹‰çš®è‚¤ï¼Œå®æ—¶è¡¨æƒ…åˆ‡æ¢
- ğŸ¤– **AI æ™ºèƒ½å¯¹è¯** - é›†æˆå¤šç§ LLM æä¾›å•†ï¼ˆOpenAIã€Anthropicã€Ollamaï¼‰
- ğŸ™ï¸ **è¯­éŸ³äº¤äº’** - æ”¯æŒè¯­éŸ³è¾“å…¥ï¼ˆSTTï¼‰å’Œè¯­éŸ³è¾“å‡ºï¼ˆTTSï¼‰
- ğŸ“… **ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ** - æ”¯æŒå®šæ—¶ä»»åŠ¡ã€é—´éš”ä»»åŠ¡ã€äº‹ä»¶è§¦å‘ä»»åŠ¡
- ğŸ”§ **Agent å·¥å…·ç³»ç»Ÿ** - å†…ç½®å¤šç§å·¥å…·ï¼ˆæ–‡ä»¶æ“ä½œã€å‰ªè´´æ¿ã€æœç´¢ã€å¤©æ°”ç­‰ï¼‰
- ğŸ® **å® ç‰©å…»æˆç³»ç»Ÿ** - å¿ƒæƒ…ã€ç²¾åŠ›ã€äº²å¯†åº¦ç­‰å±æ€§ç®¡ç†
- ğŸ“Š **ç»Ÿè®¡ä¸æˆå°±** - äº’åŠ¨ç»Ÿè®¡ã€æˆå°±è§£é”ç³»ç»Ÿ
- ğŸ”Œ **MCP åè®®æ”¯æŒ** - Model Context Protocol é›†æˆ

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

#### å‰ç«¯å±‚
- **æ¡†æ¶**: React 19.1.0 + TypeScript 5.8.3
- **æ„å»ºå·¥å…·**: Vite 7.0.4
- **çŠ¶æ€ç®¡ç†**: Zustand 5.0.9
- **UI ç»„ä»¶**: Radix UI + Tailwind CSS
- **åŠ¨ç”»æ¸²æŸ“**: oh-my-live2d 0.19.3 + PixiJS 8.14.3

#### æ¡Œé¢ç«¯
- **æ¡†æ¶**: Tauri 2.x
- **è¯­è¨€**: Rust
- **æ•°æ®åº“**: SQLite (via @tauri-apps/plugin-sql)

#### AI å±‚
- **LLM SDK**: @ai-sdk/anthropic, @ai-sdk/openai, ollama-ai-provider
- **Agent æ¡†æ¶**: @langchain/langgraph 1.0.4
- **MCP**: @modelcontextprotocol/sdk 1.24.3

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PetContainer â”‚  â”‚  ChatWindow  â”‚  â”‚SettingsWindowâ”‚     â”‚
â”‚  â”‚  (Live2D)    â”‚  â”‚   (å¯¹è¯ç•Œé¢) â”‚  â”‚   (è®¾ç½®é¢æ¿) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        çŠ¶æ€ç®¡ç†å±‚ (Zustand)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚petStore  â”‚ â”‚chatStore â”‚ â”‚configStoreâ”‚ â”‚agentStoreâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚statusStoreâ”‚ â”‚skinStore â”‚ â”‚scheduler â”‚ â”‚careStore â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸šåŠ¡æœåŠ¡å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Live2D    â”‚ â”‚LLM Chat  â”‚ â”‚Voice     â”‚ â”‚Scheduler â”‚      â”‚
â”‚  â”‚Manager   â”‚ â”‚Service   â”‚ â”‚Manager   â”‚ â”‚Manager   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Agent     â”‚ â”‚Pet Statusâ”‚ â”‚Skin      â”‚ â”‚Statisticsâ”‚      â”‚
â”‚  â”‚Runtime   â”‚ â”‚Service   â”‚ â”‚Manager   â”‚ â”‚Service   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®æŒä¹…å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              SQLite Database (pet.db)            â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚      â”‚
â”‚  â”‚  â”‚config    â”‚ â”‚pet_statusâ”‚ â”‚skins     â”‚         â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚      â”‚
â”‚  â”‚  â”‚tasks     â”‚ â”‚statisticsâ”‚ â”‚achievementsâ”‚       â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŸç”Ÿç³»ç»Ÿå±‚ (Tauri)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Window    â”‚ â”‚File      â”‚ â”‚Clipboard â”‚ â”‚Shell     â”‚      â”‚
â”‚  â”‚Manager   â”‚ â”‚System    â”‚ â”‚Manager   â”‚ â”‚Executor  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-desktop-pet/
â”œâ”€â”€ src/                          # React å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/               # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pet/                  # å® ç‰©ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ PetContainer.tsx  # å® ç‰©å®¹å™¨ï¼ˆLive2D æ¸²æŸ“ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx     # çŠ¶æ€æ¡ï¼ˆå¿ƒæƒ…ã€ç²¾åŠ›ã€äº²å¯†åº¦ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ InteractionPanel.tsx  # äº’åŠ¨é¢æ¿
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ chat/                 # å¯¹è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx    # å¯¹è¯çª—å£
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageList.tsx   # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ InputArea.tsx     # è¾“å…¥åŒºåŸŸ
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ settings/             # è®¾ç½®ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ GameSettingsWindow.tsx  # è®¾ç½®ä¸»çª—å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Live2DSettings.tsx      # Live2D è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ SchedulerTestPanel.tsx  # è°ƒåº¦å™¨æµ‹è¯•é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentAuditPanel.tsx     # Agent å®¡è®¡é¢æ¿
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ agent/                # Agent ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ toast/                # é€šçŸ¥ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ui/                   # é€šç”¨ UI ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                   # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ petStore.ts           # å® ç‰©çŠ¶æ€ï¼ˆä½ç½®ã€å¤§å°ã€å¯è§æ€§ï¼‰
â”‚   â”‚   â”œâ”€â”€ petStatusStore.ts     # å® ç‰©å±æ€§ï¼ˆå¿ƒæƒ…ã€ç²¾åŠ›ã€äº²å¯†åº¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ chatStore.ts          # å¯¹è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ configStore.ts        # é…ç½®çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ agentStore.ts         # Agent çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ schedulerStore.ts     # è°ƒåº¦å™¨çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ skinStore.ts          # çš®è‚¤çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ careStore.ts          # å…»æˆçŠ¶æ€
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ live2d/               # Live2D æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.ts        # Live2D ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ global-init.ts    # å…¨å±€åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ llm/                  # LLM æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.ts           # å¯¹è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ providers.ts      # æä¾›å•†é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ types.ts          # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ agent/                # Agent æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ runtime.ts        # Agent è¿è¡Œæ—¶
â”‚   â”‚   â”‚   â”œâ”€â”€ base-tool.ts      # å·¥å…·åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ tools/            # å†…ç½®å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ clipboard.ts  # å‰ªè´´æ¿å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ file.ts       # æ–‡ä»¶å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts     # æœç´¢å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ weather.ts    # å¤©æ°”å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ workflows/        # å·¥ä½œæµ
â”‚   â”‚   â”‚       â”œâ”€â”€ graph.ts      # LangGraph å›¾
â”‚   â”‚   â”‚       â”œâ”€â”€ supervisor.ts # ç›‘ç£è€…
â”‚   â”‚   â”‚       â””â”€â”€ workers/      # å·¥ä½œèŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ scheduler/            # ä»»åŠ¡è°ƒåº¦æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.ts        # è°ƒåº¦ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ test.ts           # æµ‹è¯•å·¥å…·
â”‚   â”‚   â”œâ”€â”€ pet/                  # å® ç‰©æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ status.ts         # çŠ¶æ€è®¡ç®—ï¼ˆè¡°å‡ã€è¾¹ç•Œæ£€æŸ¥ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ interaction.ts    # äº’åŠ¨å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ growth.ts         # æˆé•¿é˜¶æ®µé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ emotion.ts        # è¡¨æƒ…æ˜ å°„
â”‚   â”‚   â”‚   â”œâ”€â”€ expression-pack.ts # è¡¨æƒ…åŒ…ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ voice/                # è¯­éŸ³æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.ts        # è¯­éŸ³ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ tts-edge.ts       # Edge TTS
â”‚   â”‚   â”‚   â”œâ”€â”€ tts-web.ts        # Web Speech TTS
â”‚   â”‚   â”‚   â””â”€â”€ stt-web.ts        # Web Speech STT
â”‚   â”‚   â”œâ”€â”€ skin/                 # çš®è‚¤æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.ts        # çš®è‚¤ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ importer.ts       # çš®è‚¤å¯¼å…¥å™¨
â”‚   â”‚   â”œâ”€â”€ database/             # æ•°æ®åº“æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts          # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ config.ts         # é…ç½®è¡¨æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ pet-status.ts     # å® ç‰©çŠ¶æ€è¡¨æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ skins.ts          # çš®è‚¤è¡¨æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.ts          # ä»»åŠ¡è¡¨æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ statistics.ts     # ç»Ÿè®¡è¡¨æ“ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ achievements.ts   # æˆå°±è¡¨æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ statistics/           # ç»Ÿè®¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ achievements/         # æˆå°±æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mcp/                  # MCP æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ data/                 # æ•°æ®å¯¼å…¥å¯¼å‡º
â”‚   â”‚   â””â”€â”€ weather/              # å¤©æ°”æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useLive2D.ts          # Live2D Hook
â”‚   â”‚   â”œâ”€â”€ useChat.ts            # å¯¹è¯ Hook
â”‚   â”‚   â”œâ”€â”€ usePetStatus.ts       # å® ç‰©çŠ¶æ€ Hook
â”‚   â”‚   â”œâ”€â”€ usePetActions.ts      # å® ç‰©åŠ¨ä½œ Hook
â”‚   â”‚   â”œâ”€â”€ usePetCareLoop.ts     # å…»æˆå¾ªç¯ Hook
â”‚   â”‚   â”œâ”€â”€ useVoice.ts           # è¯­éŸ³ Hook
â”‚   â”‚   â”œâ”€â”€ useDrag.ts            # æ‹–æ‹½ Hook
â”‚   â”‚   â”œâ”€â”€ useWindowPlacement.ts # çª—å£ä½ç½® Hook
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                    # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ pet.ts                # å® ç‰©ç±»å‹
â”‚   â”‚   â”œâ”€â”€ config.ts             # é…ç½®ç±»å‹
â”‚   â”‚   â”œâ”€â”€ chat.ts               # å¯¹è¯ç±»å‹
â”‚   â”‚   â”œâ”€â”€ scheduler.ts          # è°ƒåº¦å™¨ç±»å‹
â”‚   â”‚   â”œâ”€â”€ agent.ts              # Agent ç±»å‹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                   # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ global.css            # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ design-tokens.css     # è®¾è®¡ä»¤ç‰Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                   # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                  # React å…¥å£
â”‚   â”œâ”€â”€ chat.tsx                  # å¯¹è¯é¡µé¢å…¥å£
â”‚   â””â”€â”€ settings.tsx              # è®¾ç½®é¡µé¢å…¥å£
â”‚
â”œâ”€â”€ src-tauri/                    # Tauri åŸç”Ÿç«¯ï¼ˆRustï¼‰
â”‚   â”œâ”€â”€ src/                      # Rust æºç 
â”‚   â”‚   â”œâ”€â”€ lib.rs                # åº“å…¥å£
â”‚   â”‚   â”œâ”€â”€ commands.rs           # Tauri å‘½ä»¤
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ tauri.conf.json           # Tauri é…ç½®
â”‚   â”œâ”€â”€ Cargo.toml                # Rust ä¾èµ–é…ç½®
â”‚   â””â”€â”€ icons/                    # åº”ç”¨å›¾æ ‡
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ models/                   # Live2D æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ default/              # é»˜è®¤æ¨¡å‹
â”‚   â”‚   â””â”€â”€ cat/                  # çŒ«æ¨¡å‹
â”‚   â””â”€â”€ whitecatfree_vts/         # ç™½çŒ«æ¨¡å‹
â”‚
â”œâ”€â”€ docs/                         # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD-å® ç‰©å…»æˆç³»ç»Ÿ.md       # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ design/                   # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ specs/                    # è§„æ ¼æ–‡æ¡£
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ check-live2d.ts           # Live2D æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ enable-live2d.ts          # Live2D å¯ç”¨è„šæœ¬
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ package.json                  # å‰ç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ pnpm-lock.yaml                # pnpm é”å®šæ–‡ä»¶
â”œâ”€â”€ vite.config.ts                # Vite é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”œâ”€â”€ tailwind.config.js            # Tailwind CSS é…ç½®
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## ğŸ”„ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. åº”ç”¨å¯åŠ¨æµç¨‹

```
ç”¨æˆ·å¯åŠ¨åº”ç”¨
    â†“
1. åˆå§‹åŒ–æ•°æ®åº“ (initDatabase)
   â”œâ”€ åˆ›å»º/è¿æ¥ SQLite æ•°æ®åº“
   â”œâ”€ æ‰§è¡Œæ•°æ®åº“è¿ç§»
   â””â”€ åˆå§‹åŒ–è¡¨ç»“æ„
    â†“
2. åŠ è½½é…ç½® (loadConfig)
   â”œâ”€ ä»æ•°æ®åº“è¯»å–é…ç½®
   â”œâ”€ åº”ç”¨çª—å£è®¾ç½®ï¼ˆå¤§å°ã€ä½ç½®ã€ç½®é¡¶ï¼‰
   â””â”€ åº”ç”¨äº¤äº’è®¾ç½®ï¼ˆç‚¹å‡»ç©¿é€ã€è®°ä½ä½ç½®ï¼‰
    â†“
3. åŠ è½½å® ç‰©çŠ¶æ€ (loadStatus)
   â”œâ”€ è¯»å–ä¸Šæ¬¡ä¿å­˜çš„çŠ¶æ€
   â”œâ”€ è®¡ç®—æ—¶é—´è¡°å‡ (calculateDecay)
   â”œâ”€ æ›´æ–°å¿ƒæƒ…ã€ç²¾åŠ›å€¼
   â””â”€ è§¦å‘è¡¨æƒ…æ›´æ–°
    â†“
4. åŠ è½½çš®è‚¤ (loadSkins)
   â”œâ”€ æ‰«æå¯ç”¨çš®è‚¤
   â”œâ”€ åº”ç”¨é€‰ä¸­çš„çš®è‚¤
   â””â”€ åˆå§‹åŒ– Live2D æ¨¡å‹
    â†“
5. åˆå§‹åŒ–æœåŠ¡
   â”œâ”€ ç»Ÿè®¡æœåŠ¡ (initializeStatsService)
   â”œâ”€ æˆå°±æœåŠ¡ (initializeAchievements)
   â””â”€ è°ƒåº¦å™¨ (scheduler.initialize)
    â†“
6. æ¸²æŸ“ UI
   â”œâ”€ æ¸²æŸ“ PetContainer (Live2D)
   â”œâ”€ æ˜¾ç¤ºçŠ¶æ€æ¡
   â””â”€ æ˜¾ç¤ºæ¬¢è¿æ°”æ³¡
    â†“
7. ç›‘å¬äº‹ä»¶
   â”œâ”€ æ‰˜ç›˜èœå•äº‹ä»¶
   â”œâ”€ è°ƒåº¦å™¨äº‹ä»¶
   â””â”€ ç”¨æˆ·äº¤äº’äº‹ä»¶
```

### 2. å¯¹è¯äº¤äº’æµç¨‹

```
ç”¨æˆ·å‘èµ·å¯¹è¯
    â†“
1. ç”¨æˆ·è¾“å…¥
   â”œâ”€ æ–‡å­—è¾“å…¥ï¼ˆInputAreaï¼‰
   â””â”€ è¯­éŸ³è¾“å…¥ï¼ˆusePushToTalkï¼‰
       â”œâ”€ å½•éŸ³
       â”œâ”€ STT è½¬æ–‡å­—
       â””â”€ å¡«å……åˆ°è¾“å…¥æ¡†
    â†“
2. æ¶ˆæ¯å¤„ç†
   â”œâ”€ æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ° chatStore
   â”œâ”€ æ˜¾ç¤ºåœ¨ MessageList
   â””â”€ æ›´æ–°äº’åŠ¨ç»Ÿè®¡
    â†“
3. AI å“åº”ç”Ÿæˆ
   â”œâ”€ æ„å»ºå¯¹è¯ä¸Šä¸‹æ–‡
   â”œâ”€ æ³¨å…¥ System Prompt
   â”‚   â”œâ”€ åŸºç¡€äººæ ¼è®¾å®š
   â”‚   â”œâ”€ æ ¹æ®äº²å¯†åº¦è°ƒæ•´è¯­æ°”
   â”‚   â””â”€ æ ¹æ®å¿ƒæƒ…è°ƒæ•´å›å¤é£æ ¼
   â”œâ”€ è°ƒç”¨ LLM API
   â”‚   â”œâ”€ OpenAI
   â”‚   â”œâ”€ Anthropic
   â”‚   â””â”€ Ollama
   â””â”€ æµå¼è¿”å›å“åº”
    â†“
4. å“åº”å±•ç¤º
   â”œâ”€ æ·»åŠ  AI æ¶ˆæ¯åˆ° chatStore
   â”œâ”€ æ˜¾ç¤ºåœ¨ MessageList
   â”œâ”€ TTS è¯­éŸ³æ’­æ”¾ï¼ˆå¯é€‰ï¼‰
   â””â”€ æ›´æ–°å® ç‰©è¡¨æƒ…
    â†“
5. åç»­å¤„ç†
   â”œâ”€ ä¿å­˜å¯¹è¯å†å²åˆ°æ•°æ®åº“
   â”œâ”€ æ›´æ–°å® ç‰©çŠ¶æ€ï¼ˆäº²å¯†åº¦+1ï¼‰
   â”œâ”€ æ£€æŸ¥æˆå°±è§£é”
   â””â”€ è®°å½•ç»Ÿè®¡æ•°æ®
```

### 3. å® ç‰©äº’åŠ¨æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»å® ç‰©
    â†“
1. ç‚¹å‡»æ£€æµ‹ (PetContainer.onClick)
   â”œâ”€ è·å–ç‚¹å‡»åæ ‡
   â”œâ”€ è®¡ç®—ç›¸å¯¹ä½ç½®
   â””â”€ åˆ¤æ–­äº’åŠ¨åŒºåŸŸ
       â”œâ”€ å¤´éƒ¨ï¼ˆä¸Š 1/3ï¼‰â†’ petï¼ˆæŠšæ‘¸ï¼‰
       â”œâ”€ èº«ä½“ï¼ˆä¸­ 1/3ï¼‰â†’ feedï¼ˆå–‚é£Ÿï¼‰
       â””â”€ ä¸‹åŠèº«ï¼ˆä¸‹ 1/3ï¼‰â†’ playï¼ˆç©è€ï¼‰
    â†“
2. å†·å´æ£€æŸ¥ (checkCooldown)
   â”œâ”€ è¯»å–ä¸Šæ¬¡äº’åŠ¨æ—¶é—´
   â”œâ”€ è®¡ç®—æ—¶é—´å·®
   â””â”€ åˆ¤æ–­æ˜¯å¦åœ¨å†·å´ä¸­
       â”œâ”€ æ˜¯ â†’ æ˜¾ç¤ºå€’è®¡æ—¶ï¼Œç»ˆæ­¢
       â””â”€ å¦ â†’ ç»§ç»­
    â†“
3. æ‰§è¡Œäº’åŠ¨ (handleInteraction)
   â”œâ”€ æ’­æ”¾ Live2D åŠ¨ç”»
   â”‚   â”œâ”€ pet â†’ tap_head
   â”‚   â”œâ”€ feed â†’ eat
   â”‚   â””â”€ play â†’ happy
   â”œâ”€ TTS è¯­éŸ³åé¦ˆ
   â”‚   â”œâ”€ "å¥½èˆ’æœ~"
   â”‚   â”œâ”€ "å¥½å¥½åƒ!"
   â”‚   â””â”€ "å¥½å¼€å¿ƒ!"
   â”œâ”€ ç²’å­æ•ˆæœ
   â”‚   â”œâ”€ çˆ±å¿ƒ â¤ï¸
   â”‚   â”œâ”€ æ˜Ÿæ˜Ÿ â­
   â”‚   â””â”€ é£Ÿç‰©å›¾æ ‡ ğŸ”
   â””â”€ æ›´æ–°å±æ€§å€¼
       â”œâ”€ pet: mood+10, intimacy+2
       â”œâ”€ feed: mood+8, energy+15, intimacy+1
       â””â”€ play: mood+12, energy-5, intimacy+3
    â†“
4. åç»­å¤„ç†
   â”œâ”€ ä¿å­˜çŠ¶æ€åˆ°æ•°æ®åº“
   â”œâ”€ è®°å½•åˆ° daily_stats
   â”œâ”€ æ£€æŸ¥æˆå°±è§£é”
   â”œâ”€ æ£€æŸ¥é˜¶æ®µå‡çº§
   â”‚   â”œâ”€ STRANGER (0-30)
   â”‚   â”œâ”€ FRIEND (31-70)
   â”‚   â””â”€ SOULMATE (71-100)
   â””â”€ è§¦å‘è¡¨æƒ…æ›´æ–°
```

### 4. å±æ€§è¡°å‡æµç¨‹

```
è§¦å‘æ—¶æœºï¼š
â”œâ”€ åº”ç”¨å¯åŠ¨
â”œâ”€ ç”¨æˆ·äº’åŠ¨
â””â”€ å®šæ—¶æ£€æŸ¥ï¼ˆæ¯ 30 ç§’ï¼‰
    â†“
1. è®¡ç®—è¡°å‡ (calculateDecay)
   â”œâ”€ è¯»å– lastInteraction æ—¶é—´æˆ³
   â”œâ”€ è®¡ç®—æ—¶é—´å·®ï¼ˆå°æ—¶ï¼‰
   â”œâ”€ åº”ç”¨è¡°å‡å…¬å¼
   â”‚   â”œâ”€ mood -= hoursPassed Ã— 2
   â”‚   â””â”€ energy -= hoursPassed Ã— 1.5
   â””â”€ é™åˆ¶æœ€å°å€¼ä¸º 0
    â†“
2. åº”ç”¨è¡°å‡ (applyDecay)
   â”œâ”€ æ›´æ–° mood å€¼
   â”œâ”€ æ›´æ–° energy å€¼
   â””â”€ ä¿æŒ intimacy ä¸å˜ï¼ˆåªå¢ä¸å‡ï¼‰
    â†“
3. ä¿å­˜çŠ¶æ€
   â”œâ”€ å†™å…¥æ•°æ®åº“
   â””â”€ æ›´æ–° petStatusStore
    â†“
4. è§¦å‘ UI æ›´æ–°
   â”œâ”€ å±æ€§æ¡åŠ¨ç”»
   â”œâ”€ è¡¨æƒ…åˆ‡æ¢
   â”‚   â”œâ”€ energy < 20 â†’ sleepy
   â”‚   â”œâ”€ mood >= 70 â†’ happy
   â”‚   â”œâ”€ mood >= 40 â†’ normal
   â”‚   â””â”€ mood < 40 â†’ sad
   â””â”€ çŠ¶æ€æç¤º
       â”œâ”€ mood < 20 â†’ "æˆ‘æœ‰ç‚¹ä¸å¼€å¿ƒ..."
       â””â”€ energy < 20 â†’ "å¥½ç´¯...æƒ³ç¡è§‰..."
```

### 5. Agent ä»»åŠ¡æ‰§è¡Œæµç¨‹

```
è§¦å‘ Agent ä»»åŠ¡
â”œâ”€ ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼ˆå¯¹è¯ä¸­ï¼‰
â”œâ”€ è°ƒåº¦å™¨è§¦å‘ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
â””â”€ äº‹ä»¶è§¦å‘ï¼ˆä½å¿ƒæƒ…æé†’ç­‰ï¼‰
    â†“
1. åˆ›å»º Agent Runtime
   â”œâ”€ åŠ è½½ LLM é…ç½®
   â”œâ”€ åŠ è½½ System Prompt
   â”œâ”€ åŠ è½½å…è®¸çš„å·¥å…·
   â””â”€ è®¾ç½®æœ€å¤§æ­¥æ•°
    â†“
2. æ‰§è¡Œ Agent å¾ªç¯
   â”œâ”€ ç¬¬ 1 æ­¥ï¼šç†è§£ä»»åŠ¡
   â”‚   â”œâ”€ LLM åˆ†æç”¨æˆ·æ„å›¾
   â”‚   â””â”€ å†³å®šä½¿ç”¨å“ªäº›å·¥å…·
   â”œâ”€ ç¬¬ 2 æ­¥ï¼šè°ƒç”¨å·¥å…·
   â”‚   â”œâ”€ æ–‡ä»¶å·¥å…·ï¼ˆè¯»å†™æ–‡ä»¶ï¼‰
   â”‚   â”œâ”€ å‰ªè´´æ¿å·¥å…·ï¼ˆè¯»å†™å‰ªè´´æ¿ï¼‰
   â”‚   â”œâ”€ æœç´¢å·¥å…·ï¼ˆç½‘ç»œæœç´¢ï¼‰
   â”‚   â”œâ”€ å¤©æ°”å·¥å…·ï¼ˆæŸ¥è¯¢å¤©æ°”ï¼‰
   â”‚   â””â”€ æ‰“å¼€å·¥å…·ï¼ˆæ‰“å¼€ URL/åº”ç”¨ï¼‰
   â”œâ”€ ç¬¬ 3 æ­¥ï¼šå¤„ç†ç»“æœ
   â”‚   â”œâ”€ è§£æå·¥å…·è¿”å›
   â”‚   â””â”€ ç»§ç»­æˆ–ç»“æŸ
   â””â”€ å¾ªç¯ç›´åˆ°å®Œæˆæˆ–è¾¾åˆ°æœ€å¤§æ­¥æ•°
    â†“
3. è¿”å›ç»“æœ
   â”œâ”€ ç”Ÿæˆæœ€ç»ˆå›å¤
   â”œâ”€ æ˜¾ç¤ºåœ¨å¯¹è¯çª—å£
   â””â”€ è®°å½•åˆ°å®¡è®¡æ—¥å¿—
    â†“
4. åç»­å¤„ç†
   â”œâ”€ æ›´æ–°å® ç‰©çŠ¶æ€
   â”œâ”€ è®°å½•ç»Ÿè®¡æ•°æ®
   â””â”€ æ£€æŸ¥æˆå°±è§£é”
```

### 6. ä»»åŠ¡è°ƒåº¦æµç¨‹

```
è°ƒåº¦å™¨è¿è¡Œä¸­
    â†“
1. ä»»åŠ¡æ³¨å†Œ
   â”œâ”€ ç”¨æˆ·åˆ›å»ºä»»åŠ¡
   â”œâ”€ é¢„è®¾ä»»åŠ¡è‡ªåŠ¨æ³¨å†Œ
   â””â”€ ä¿å­˜åˆ°æ•°æ®åº“
    â†“
2. è§¦å‘å™¨è¯„ä¼°
   â”œâ”€ Cron è§¦å‘å™¨
   â”‚   â”œâ”€ è§£æ cron è¡¨è¾¾å¼
   â”‚   â”œâ”€ è®¡ç®—ä¸‹æ¬¡è¿è¡Œæ—¶é—´
   â”‚   â””â”€ åˆ°æ—¶é—´æ—¶è§¦å‘
   â”œâ”€ Interval è§¦å‘å™¨
   â”‚   â”œâ”€ è®¡ç®—é—´éš”æ—¶é—´
   â”‚   â””â”€ åˆ°æ—¶é—´æ—¶è§¦å‘
   â”œâ”€ Event è§¦å‘å™¨
   â”‚   â”œâ”€ ç›‘å¬äº‹ä»¶æ€»çº¿
   â”‚   â””â”€ äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘
   â””â”€ Manual è§¦å‘å™¨
       â””â”€ ç”¨æˆ·æ‰‹åŠ¨è§¦å‘
    â†“
3. åŠ¨ä½œæ‰§è¡Œ
   â”œâ”€ Notification åŠ¨ä½œ
   â”‚   â”œâ”€ æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥
   â”‚   â”œâ”€ æ˜¾ç¤º Toast
   â”‚   â””â”€ æ˜¾ç¤ºå® ç‰©æ°”æ³¡
   â”œâ”€ Agent Task åŠ¨ä½œ
   â”‚   â”œâ”€ åˆ›å»º Agent Runtime
   â”‚   â”œâ”€ æ‰§è¡Œ Agent ä»»åŠ¡
   â”‚   â””â”€ è¿”å›ç»“æœ
   â”œâ”€ Workflow åŠ¨ä½œ
   â”‚   â”œâ”€ åŠ è½½å·¥ä½œæµ
   â”‚   â”œâ”€ æ‰§è¡Œ LangGraph
   â”‚   â””â”€ è¿”å›ç»“æœ
   â””â”€ Script åŠ¨ä½œ
       â””â”€ æ‰§è¡Œè‡ªå®šä¹‰è„šæœ¬ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
    â†“
4. è®°å½•æ‰§è¡Œ
   â”œâ”€ ä¿å­˜æ‰§è¡Œè®°å½•
   â”œâ”€ æ›´æ–°ä»»åŠ¡ç»Ÿè®¡
   â””â”€ è§¦å‘äº‹ä»¶é€šçŸ¥
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“è¡¨ç»“æ„

#### 1. config è¡¨ï¼ˆé…ç½®è¡¨ï¼‰
```sql
CREATE TABLE config (
  id INTEGER PRIMARY KEY,
  key TEXT NOT NULL UNIQUE,
  value TEXT NOT NULL,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```
å­˜å‚¨åº”ç”¨é…ç½®ï¼ŒåŒ…æ‹¬ï¼š
- LLM é…ç½®ï¼ˆproviderã€modelã€apiKeyã€baseUrlï¼‰
- çª—å£é…ç½®ï¼ˆsizeã€positionã€alwaysOnTopï¼‰
- äº¤äº’é…ç½®ï¼ˆclickThroughã€rememberPositionï¼‰
- è¯­éŸ³é…ç½®ï¼ˆttsã€sttã€voiceï¼‰
- çš®è‚¤é…ç½®ï¼ˆskinIdï¼‰

#### 2. pet_status è¡¨ï¼ˆå® ç‰©çŠ¶æ€è¡¨ï¼‰
```sql
CREATE TABLE pet_status (
  id INTEGER PRIMARY KEY,
  mood REAL DEFAULT 80,              -- å¿ƒæƒ…å€¼ (0-100)
  energy REAL DEFAULT 100,           -- ç²¾åŠ›å€¼ (0-100)
  intimacy REAL DEFAULT 0,           -- äº²å¯†åº¦ (0-100)
  last_interaction DATETIME,         -- ä¸Šæ¬¡äº’åŠ¨æ—¶é—´
  last_feed DATETIME,                -- ä¸Šæ¬¡å–‚é£Ÿæ—¶é—´
  last_play DATETIME,                -- ä¸Šæ¬¡ç©è€æ—¶é—´
  total_interactions INTEGER DEFAULT 0,  -- ç´¯è®¡äº’åŠ¨æ¬¡æ•°
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. skins è¡¨ï¼ˆçš®è‚¤è¡¨ï¼‰
```sql
CREATE TABLE skins (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  path TEXT NOT NULL,
  preview_image TEXT,
  is_builtin INTEGER DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### 4. tasks è¡¨ï¼ˆä»»åŠ¡è¡¨ï¼‰
```sql
CREATE TABLE tasks (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  trigger_type TEXT NOT NULL,        -- 'cron' | 'interval' | 'event' | 'manual'
  trigger_config TEXT NOT NULL,      -- JSON
  action_type TEXT NOT NULL,         -- 'agent_task' | 'notification' | 'workflow'
  action_config TEXT NOT NULL,       -- JSON
  enabled INTEGER DEFAULT 1,
  last_run DATETIME,
  next_run DATETIME,
  metadata TEXT,                     -- JSON
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME
);
```

#### 5. task_executions è¡¨ï¼ˆä»»åŠ¡æ‰§è¡Œè®°å½•è¡¨ï¼‰
```sql
CREATE TABLE task_executions (
  id TEXT PRIMARY KEY,
  task_id TEXT NOT NULL,
  status TEXT NOT NULL,              -- 'running' | 'success' | 'failed' | 'cancelled'
  started_at DATETIME NOT NULL,
  completed_at DATETIME,
  result TEXT,                       -- JSON
  error TEXT,
  duration INTEGER,                  -- æ¯«ç§’
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);
```

#### 6. daily_stats è¡¨ï¼ˆæ¯æ—¥ç»Ÿè®¡è¡¨ï¼‰
```sql
CREATE TABLE daily_stats (
  id INTEGER PRIMARY KEY,
  date TEXT NOT NULL UNIQUE,         -- YYYY-MM-DD
  pet_count INTEGER DEFAULT 0,       -- æŠšæ‘¸æ¬¡æ•°
  feed_count INTEGER DEFAULT 0,      -- å–‚é£Ÿæ¬¡æ•°
  play_count INTEGER DEFAULT 0,      -- ç©è€æ¬¡æ•°
  chat_count INTEGER DEFAULT 0,      -- å¯¹è¯æ¬¡æ•°
  total_duration INTEGER DEFAULT 0,  -- äº’åŠ¨æ€»æ—¶é•¿ï¼ˆç§’ï¼‰
  mood_avg REAL,                     -- å½“æ—¥å¹³å‡å¿ƒæƒ…
  energy_avg REAL,                   -- å½“æ—¥å¹³å‡ç²¾åŠ›
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### 7. achievements è¡¨ï¼ˆæˆå°±è¡¨ï¼‰
```sql
CREATE TABLE achievements (
  id TEXT PRIMARY KEY,
  type TEXT NOT NULL,                -- 'interaction' | 'duration' | 'intimacy' | 'special'
  name TEXT NOT NULL,
  description TEXT,
  icon TEXT,
  unlock_condition TEXT,             -- JSON
  unlocked_at DATETIME,
  is_unlocked INTEGER DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

#### 8. conversations è¡¨ï¼ˆå¯¹è¯å†å²è¡¨ï¼‰
```sql
CREATE TABLE conversations (
  id TEXT PRIMARY KEY,
  role TEXT NOT NULL,                -- 'user' | 'assistant' | 'system'
  content TEXT NOT NULL,
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
  metadata TEXT                      -- JSON
);
```

#### 9. agent_audit è¡¨ï¼ˆAgent å®¡è®¡æ—¥å¿—è¡¨ï¼‰
```sql
CREATE TABLE agent_audit (
  id TEXT PRIMARY KEY,
  source TEXT NOT NULL,              -- 'chat' | 'scheduler' | 'manual'
  prompt TEXT NOT NULL,
  tools_used TEXT,                   -- JSON array
  steps_taken INTEGER,
  result TEXT,
  error TEXT,
  started_at DATETIME NOT NULL,
  completed_at DATETIME,
  duration INTEGER                   -- æ¯«ç§’
);
```

---

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. Live2D æ¸²æŸ“ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/live2d/manager.ts` - Live2D ç®¡ç†å™¨
- `src/hooks/useLive2D.ts` - Live2D Hook
- `src/components/pet/PetContainer.tsx` - å® ç‰©å®¹å™¨

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… æ”¯æŒ Live2D Cubism 3/4 æ¨¡å‹
- âœ… å®æ—¶è¡¨æƒ…åˆ‡æ¢ï¼ˆhappyã€sadã€thinkingã€confused ç­‰ï¼‰
- âœ… åŠ¨ç”»æ’­æ”¾ï¼ˆtap_headã€eatã€happy ç­‰ï¼‰
- âœ… è‡ªåŠ¨çœ¨çœ¼ã€å‘¼å¸åŠ¨ç”»
- âœ… é¼ æ ‡è¿½è¸ªï¼ˆçœ¼ç›è·Ÿéšé¼ æ ‡ï¼‰
- âœ… ç‚¹å‡»æ£€æµ‹ï¼ˆå¤´éƒ¨ã€èº«ä½“ã€è„šéƒ¨ï¼‰
- âœ… çš®è‚¤åˆ‡æ¢ï¼ˆæ”¯æŒè‡ªå®šä¹‰çš®è‚¤å¯¼å…¥ï¼‰

**è¡¨æƒ…æ˜ å°„è§„åˆ™**:
```typescript
function getMoodEmotion(mood: number, energy: number): EmotionType {
  if (energy < 20) return 'sleepy';  // ä¼˜å…ˆçº§1ï¼šç–²æƒ«
  if (mood >= 70) return 'happy';
  if (mood >= 40) return 'normal';
  if (mood >= 20) return 'sad';
  return 'confused';  // mood < 20
}
```

### 2. AI å¯¹è¯ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/llm/chat.ts` - å¯¹è¯æœåŠ¡
- `src/services/llm/providers.ts` - æä¾›å•†é…ç½®
- `src/hooks/useChat.ts` - å¯¹è¯ Hook
- `src/components/chat/ChatWindow.tsx` - å¯¹è¯çª—å£

**æ”¯æŒçš„ LLM æä¾›å•†**:
- **OpenAI** - GPT-4ã€GPT-3.5-turbo
- **Anthropic** - Claude 3.5 Sonnetã€Claude 3 Opus
- **Ollama** - æœ¬åœ°æ¨¡å‹ï¼ˆllama3ã€qwen ç­‰ï¼‰

**å¯¹è¯æµç¨‹**:
1. ç”¨æˆ·è¾“å…¥æ¶ˆæ¯
2. æ„å»ºå¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆåŒ…å«å†å²æ¶ˆæ¯ï¼‰
3. æ³¨å…¥ System Promptï¼ˆæ ¹æ®äº²å¯†åº¦åŠ¨æ€è°ƒæ•´ï¼‰
4. è°ƒç”¨ LLM APIï¼ˆæµå¼è¿”å›ï¼‰
5. æ˜¾ç¤º AI å›å¤
6. TTS è¯­éŸ³æ’­æ”¾ï¼ˆå¯é€‰ï¼‰
7. ä¿å­˜å¯¹è¯å†å²

**System Prompt åŠ¨æ€è°ƒæ•´**:
```typescript
function buildSystemPrompt(intimacy: number): string {
  const basePrompt = "ä½ æ˜¯ç”¨æˆ·çš„AIæ¡Œé¢å® ç‰©...";
  
  if (intimacy < 30) {
    // STRANGER é˜¶æ®µï¼šç¤¼è²Œä½†ç–ç¦»
    return `${basePrompt}\nä½ å’Œç”¨æˆ·åˆšè®¤è¯†ï¼Œä¿æŒç¤¼è²Œä½†ä¸è¦è¿‡äºäº²å¯†ã€‚å›ç­”ç®€æ´ä¸“ä¸šã€‚`;
  } else if (intimacy < 70) {
    // FRIEND é˜¶æ®µï¼šå‹å–„æ´»æ³¼
    return `${basePrompt}\nä½ å’Œç”¨æˆ·å·²ç»æ˜¯æœ‹å‹äº†ï¼Œå¯ä»¥æ´»æ³¼ä¸€äº›ï¼Œå¶å°”åˆ†äº«ä½ çš„'æƒ³æ³•'ã€‚`;
  } else {
    // SOULMATE é˜¶æ®µï¼šäº²å¯†é»˜å¥‘
    return `${basePrompt}\nä½ å’Œç”¨æˆ·å·²ç»å¾ˆäº²å¯†äº†ï¼Œä½ äº†è§£TAçš„ä¹ æƒ¯ï¼Œä¼šä¸»åŠ¨å…³å¿ƒTAã€‚`;
  }
}
```

### 3. Agent å·¥å…·ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/agent/runtime.ts` - Agent è¿è¡Œæ—¶
- `src/services/agent/base-tool.ts` - å·¥å…·åŸºç±»
- `src/services/agent/tools/` - å†…ç½®å·¥å…·

**å†…ç½®å·¥å…·**:
1. **æ–‡ä»¶å·¥å…·**
   - `file_read` - è¯»å–æ–‡ä»¶å†…å®¹
   - `file_write` - å†™å…¥æ–‡ä»¶å†…å®¹
   - `file_exists` - æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

2. **å‰ªè´´æ¿å·¥å…·**
   - `clipboard_read` - è¯»å–å‰ªè´´æ¿å†…å®¹
   - `clipboard_write` - å†™å…¥å‰ªè´´æ¿å†…å®¹

3. **æœç´¢å·¥å…·**
   - `web_search` - ç½‘ç»œæœç´¢ï¼ˆDuckDuckGoï¼‰

4. **å¤©æ°”å·¥å…·**
   - `weather_query` - æŸ¥è¯¢å¤©æ°”ä¿¡æ¯

5. **æ‰“å¼€å·¥å…·**
   - `open_url` - æ‰“å¼€ URL
   - `open_app` - æ‰“å¼€åº”ç”¨ç¨‹åº

**Agent æ‰§è¡Œæµç¨‹**:
```
ç”¨æˆ·: "å¸®æˆ‘æœç´¢ä»Šå¤©çš„å¤©æ°”"
  â†“
Agent åˆ†æ: éœ€è¦ä½¿ç”¨ weather_query å·¥å…·
  â†“
è°ƒç”¨å·¥å…·: weather_query({ city: "åŒ—äº¬" })
  â†“
å·¥å…·è¿”å›: { temperature: 15, condition: "æ™´" }
  â†“
Agent å›å¤: "ä»Šå¤©åŒ—äº¬å¤©æ°”æ™´ï¼Œæ¸©åº¦ 15Â°C"
```

### 4. ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/scheduler/manager.ts` - è°ƒåº¦ç®¡ç†å™¨
- `src-tauri/src/scheduler.rs` - Rust è°ƒåº¦å™¨ï¼ˆåç«¯ï¼‰
- `src/components/settings/SchedulerTestPanel.tsx` - è°ƒåº¦å™¨æµ‹è¯•é¢æ¿

**è§¦å‘å™¨ç±»å‹**:
1. **Cron è§¦å‘å™¨** - å®šæ—¶è§¦å‘
   ```json
   {
     "type": "cron",
     "expression": "0 9 * * *"  // æ¯å¤© 9:00
   }
   ```

2. **Interval è§¦å‘å™¨** - é—´éš”è§¦å‘
   ```json
   {
     "type": "interval",
     "seconds": 3600  // æ¯å°æ—¶
   }
   ```

3. **Event è§¦å‘å™¨** - äº‹ä»¶è§¦å‘
   ```json
   {
     "type": "event",
     "eventName": "low_mood"  // å¿ƒæƒ…ä½è½æ—¶
   }
   ```

4. **Manual è§¦å‘å™¨** - æ‰‹åŠ¨è§¦å‘
   ```json
   {
     "type": "manual"
   }
   ```

**åŠ¨ä½œç±»å‹**:
1. **Notification åŠ¨ä½œ** - æ˜¾ç¤ºé€šçŸ¥
   ```json
   {
     "type": "notification",
     "title": "ä»»åŠ¡æé†’",
     "body": "è¯¥ä¼‘æ¯äº†ï¼"
   }
   ```

2. **Agent Task åŠ¨ä½œ** - æ‰§è¡Œ Agent ä»»åŠ¡
   ```json
   {
     "type": "agent_task",
     "prompt": "æŸ¥è¯¢ä»Šå¤©çš„å¤©æ°”å¹¶å‘Šè¯‰æˆ‘",
     "toolsAllowed": ["weather_query"],
     "maxSteps": 3
   }
   ```

3. **Workflow åŠ¨ä½œ** - æ‰§è¡Œå·¥ä½œæµ
   ```json
   {
     "type": "workflow",
     "workflowId": "daily_summary",
     "input": {}
   }
   ```

**é¢„è®¾ä»»åŠ¡ç¤ºä¾‹**:
- æ—©æ™¨é—®å€™ï¼ˆæ¯å¤© 8:00ï¼‰
- åˆä¼‘æé†’ï¼ˆæ¯å¤© 12:00ï¼‰
- æ™šå®‰é—®å€™ï¼ˆæ¯å¤© 22:00ï¼‰
- å¿ƒæƒ…ä½è½å…³æ€€ï¼ˆmood < 30 æ—¶ï¼‰
- é•¿æ—¶é—´æœªäº’åŠ¨æé†’ï¼ˆ2 å°æ—¶æ— äº’åŠ¨ï¼‰

### 5. å® ç‰©å…»æˆç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/pet/status.ts` - çŠ¶æ€è®¡ç®—æœåŠ¡
- `src/services/pet/interaction.ts` - äº’åŠ¨å¤„ç†æœåŠ¡
- `src/services/pet/growth.ts` - æˆé•¿é˜¶æ®µé€»è¾‘
- `src/stores/petStatusStore.ts` - å® ç‰©çŠ¶æ€ Store

**æ ¸å¿ƒå±æ€§**:
1. **moodï¼ˆå¿ƒæƒ…å€¼ï¼‰** - 0-100
   - å½±å“è¡¨æƒ…é€‰æ‹©
   - å½±å“å¯¹è¯è¯­æ°”
   - æ¯å°æ—¶è¡°å‡ 2 ç‚¹

2. **energyï¼ˆç²¾åŠ›å€¼ï¼‰** - 0-100
   - å½±å“å“åº”é€Ÿåº¦
   - energy < 20 è¿›å…¥ç¡çœ çŠ¶æ€
   - æ¯å°æ—¶è¡°å‡ 1.5 ç‚¹

3. **intimacyï¼ˆäº²å¯†åº¦ï¼‰** - 0-100
   - å½±å“ AI äººæ ¼
   - å½±å“åŠŸèƒ½è§£é”
   - åªå¢ä¸å‡

**äº’åŠ¨ç±»å‹**:
| äº’åŠ¨ç±»å‹ | è§¦å‘åŒºåŸŸ | å±æ€§æ•ˆæœ | åŠ¨ç”» | å†·å´æ—¶é—´ |
|---------|---------|---------|------|---------|
| **pet**ï¼ˆæŠšæ‘¸ï¼‰ | å¤´éƒ¨ | mood+10, intimacy+2 | tap_head | 60s |
| **feed**ï¼ˆå–‚é£Ÿï¼‰ | èº«ä½“ | mood+8, energy+15, intimacy+1 | eat | 120s |
| **play**ï¼ˆç©è€ï¼‰ | è„šéƒ¨ | mood+12, energy-5, intimacy+3 | happy | 90s |

**æˆé•¿é˜¶æ®µ**:
| é˜¶æ®µ | Intimacy èŒƒå›´ | AI äººæ ¼ | è§£é”åŠŸèƒ½ |
|-----|-------------|--------|---------|
| **STRANGER** | 0-30 | ç¤¼è²Œä½†ç–ç¦» | åŸºç¡€å¯¹è¯ã€åŸºç¡€äº’åŠ¨ |
| **FRIEND** | 31-70 | å‹å–„æ´»æ³¼ | ä¸»åŠ¨æé†’ã€æƒ…ç»ªæ„ŸçŸ¥ |
| **SOULMATE** | 71-100 | äº²å¯†é»˜å¥‘ | æ·±åº¦å¯¹è¯ã€ä¸ªæ€§åŒ–ä»»åŠ¡ |

### 6. è¯­éŸ³äº¤äº’ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/voice/manager.ts` - è¯­éŸ³ç®¡ç†å™¨
- `src/services/voice/tts-edge.ts` - Edge TTS
- `src/services/voice/tts-web.ts` - Web Speech TTS
- `src/services/voice/stt-web.ts` - Web Speech STT
- `src/hooks/useVoice.ts` - è¯­éŸ³ Hook
- `src/hooks/usePushToTalk.ts` - æŒ‰é”®è¯´è¯ Hook

**TTSï¼ˆæ–‡å­—è½¬è¯­éŸ³ï¼‰**:
- **Edge TTS** - å¾®è½¯ Edge è¯­éŸ³åˆæˆï¼ˆé«˜è´¨é‡ï¼‰
- **Web Speech TTS** - æµè§ˆå™¨å†…ç½®è¯­éŸ³åˆæˆï¼ˆå…¼å®¹æ€§å¥½ï¼‰

**STTï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰**:
- **Web Speech STT** - æµè§ˆå™¨å†…ç½®è¯­éŸ³è¯†åˆ«

**ä½¿ç”¨æ–¹å¼**:
1. ç‚¹å‡»éº¦å…‹é£æŒ‰é’®å¼€å§‹å½•éŸ³
2. è¯´è¯
3. æ¾å¼€æŒ‰é’®åœæ­¢å½•éŸ³
4. è‡ªåŠ¨è½¬æ¢ä¸ºæ–‡å­—å¹¶å¡«å……åˆ°è¾“å…¥æ¡†
5. AI å›å¤æ—¶è‡ªåŠ¨æ’­æ”¾è¯­éŸ³

### 7. ç»Ÿè®¡ä¸æˆå°±ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `src/services/statistics/index.ts` - ç»Ÿè®¡æœåŠ¡
- `src/services/achievements/index.ts` - æˆå°±æœåŠ¡
- `src/services/database/statistics.ts` - ç»Ÿè®¡æ•°æ®åº“æ“ä½œ
- `src/services/database/achievements.ts` - æˆå°±æ•°æ®åº“æ“ä½œ

**ç»Ÿè®¡ç»´åº¦**:
- **æ¯æ—¥ç»Ÿè®¡** - å„ç±»äº’åŠ¨æ¬¡æ•°ã€äº’åŠ¨æ—¶é•¿ã€å¹³å‡å±æ€§å€¼
- **ç´¯è®¡ç»Ÿè®¡** - æ€»é™ªä¼´å¤©æ•°ã€æ€»äº’åŠ¨æ¬¡æ•°ã€è¿ç»­äº’åŠ¨å¤©æ•°
- **è¶‹åŠ¿åˆ†æ** - è¿‘ 7 å¤©äº’åŠ¨æ›²çº¿ã€å±æ€§å˜åŒ–è¶‹åŠ¿

**æˆå°±ç±»åˆ«**:
1. **äº’åŠ¨æˆå°±** - ç´¯è®¡äº’åŠ¨æ¬¡æ•°
   - åˆæ¬¡è§é¢ï¼ˆ1 æ¬¡ï¼‰
   - ç†Ÿæ‚‰çš„æœ‹å‹ï¼ˆ100 æ¬¡ï¼‰
   - å½¢å½±ä¸ç¦»ï¼ˆ1000 æ¬¡ï¼‰

2. **æ—¶é•¿æˆå°±** - é™ªä¼´å¤©æ•°
   - ä¸€å‘¨ä¹‹çº¦ï¼ˆ7 å¤©ï¼‰
   - æœˆåº¦ä¼™ä¼´ï¼ˆ30 å¤©ï¼‰
   - ç™¾æ—¥é™ªä¼´ï¼ˆ100 å¤©ï¼‰

3. **äº²å¯†åº¦æˆå°±** - æˆé•¿é˜¶æ®µ
   - æˆä¸ºæœ‹å‹ï¼ˆintimacy 31ï¼‰
   - äº²å¯†ä¼™ä¼´ï¼ˆintimacy 71ï¼‰

4. **ç‰¹æ®Šæˆå°±** - ç‰¹æ®Šæ¡ä»¶
   - å¤œçŒ«å­ï¼ˆå‡Œæ™¨ 2-4 ç‚¹äº’åŠ¨ 10 æ¬¡ï¼‰
   - æ—©èµ·é¸Ÿï¼ˆæ—©ä¸Š 6-8 ç‚¹äº’åŠ¨ 10 æ¬¡ï¼‰

---

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **pnpm**: >= 8.0.0
- **Rust**: >= 1.70.0
- **Tauri CLI**: >= 2.0.0

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# å®‰è£… Tauri CLIï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
pnpm add -D @tauri-apps/cli
```

### å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­æ›´æ–°ï¼‰
pnpm dev

# å¯åŠ¨ Tauri å¼€å‘çª—å£ï¼ˆå‰ç«¯ + åŸç”Ÿç«¯ï¼‰
pnpm dev:tauri

# æ„å»ºå‰ç«¯é™æ€æ–‡ä»¶
pnpm build

# æ‰“åŒ…æ¡Œé¢åº”ç”¨
pnpm build:tauri

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview
```

### å·¥å…·è„šæœ¬

```bash
# æ£€æŸ¥ Live2D é…ç½®
pnpm check:live2d

# å¯ç”¨ Live2D
pnpm enable:live2d

# é‡ç½®é…ç½®
pnpm reset:config
```

### ä»£ç è§„èŒƒ

#### TypeScript
- ä¸¥æ ¼æ¨¡å¼ï¼Œç¦æ­¢ä½¿ç”¨ `any`
- å‡½æ•°ç»„ä»¶ä¼˜å…ˆï¼Œä½¿ç”¨ Hooks ç®¡ç†å‰¯ä½œç”¨
- å•ä¸ªç»„ä»¶ä¸è¶…è¿‡ 400 è¡Œï¼Œå¤æ‚ç»„ä»¶éœ€æ‹†åˆ†
- æ–‡ä»¶åä½¿ç”¨ kebab-caseï¼Œç»„ä»¶åä½¿ç”¨ PascalCase
- Hook å‘½åä½¿ç”¨ `useXxx` æ ¼å¼

#### æ ·å¼
- ä¼˜å…ˆä½¿ç”¨ Tailwind CSS
- é¿å…è‡ªå®šä¹‰ CSSï¼Œç»Ÿä¸€æ”¾åœ¨ `src/styles/`
- ä½¿ç”¨è®¾è®¡ä»¤ç‰Œï¼ˆdesign-tokens.cssï¼‰

#### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ Zustand ç®¡ç†å…¨å±€çŠ¶æ€
- çŠ¶æ€é›†ä¸­æ”¾å…¥ `src/stores/`
- è·¨å±‚æ•°æ®ä½¿ç”¨ Zod æ ¡éªŒ

#### æäº¤è§„èŒƒ
- ä½¿ç”¨çº¦å®šå¼æäº¤å‰ç¼€ï¼š`feat`/`fix`/`chore`/`docs`/`refactor`
- ç¤ºä¾‹ï¼š`feat: add live2d toggle`

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. Live2D æ¸²æŸ“ä¼˜åŒ–
- ç©ºé—²æ—¶é™ä½å¸§ç‡ï¼ˆ60fps â†’ 15fpsï¼‰
- äº’åŠ¨æ—¶æ¢å¤é«˜å¸§ç‡
- ä½¿ç”¨ PixiJS çš„ç¡¬ä»¶åŠ é€Ÿ

### 2. å±æ€§è®¡ç®—ä¼˜åŒ–
- ä½¿ç”¨æ—¶é—´å·®è®¡ç®—è€Œéå®šæ—¶å™¨è½®è¯¢
- å±æ€§å˜åŒ– < 5 æ—¶ä¸è§¦å‘ UI æ›´æ–°
- ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è®¡ç®—

### 3. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- ä½¿ç”¨ç´¢å¼•ï¼ˆdateã€task_id ç­‰ï¼‰
- æ‰¹é‡å†™å…¥äº’åŠ¨è®°å½•ï¼ˆæ¯ 5 åˆ†é’Ÿä¸€æ¬¡ï¼‰
- ä½¿ç”¨äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§

### 4. å†…å­˜ç®¡ç†
- å¯¹è¯å†å²é™åˆ¶æœ€è¿‘ 100 æ¡
- å®šæœŸæ¸…ç†è¿‡æœŸçš„æ‰§è¡Œè®°å½•
- ä½¿ç”¨ Immer ä¼˜åŒ–çŠ¶æ€æ›´æ–°

---

## ğŸš€ éƒ¨ç½²ä¸æ‰“åŒ…

### æ‰“åŒ…æ¡Œé¢åº”ç”¨

```bash
# æ‰“åŒ…æ‰€æœ‰å¹³å°
pnpm build:tauri

# æ‰“åŒ…ç‰¹å®šå¹³å°
pnpm tauri build --target x86_64-apple-darwin  # macOS
pnpm tauri build --target x86_64-pc-windows-msvc  # Windows
pnpm tauri build --target x86_64-unknown-linux-gnu  # Linux
```

### æ‰“åŒ…äº§ç‰©

```
src-tauri/target/release/bundle/
â”œâ”€â”€ macos/
â”‚   â””â”€â”€ AI Desktop Pet.app
â”œâ”€â”€ windows/
â”‚   â”œâ”€â”€ AI Desktop Pet.exe
â”‚   â””â”€â”€ AI Desktop Pet.msi
â””â”€â”€ linux/
    â”œâ”€â”€ ai-desktop-pet.AppImage
    â””â”€â”€ ai-desktop-pet.deb
```

### é…ç½®ç­¾åï¼ˆmacOSï¼‰

```json
// src-tauri/tauri.conf.json
{
  "bundle": {
    "macOS": {
      "signingIdentity": "Developer ID Application: Your Name (TEAM_ID)",
      "providerShortName": "TEAM_ID"
    }
  }
}
```

---

## ğŸ” å®‰å…¨ä¸éšç§

### API å¯†é’¥ç®¡ç†
- API å¯†é’¥å­˜å‚¨åœ¨æœ¬åœ° SQLite æ•°æ®åº“
- ä¸ä¸Šä¼ åˆ°æœåŠ¡å™¨
- ä½¿ç”¨ Tauri çš„å®‰å…¨å­˜å‚¨æœºåˆ¶

### æ•°æ®éšç§
- æ‰€æœ‰å¯¹è¯å†å²å­˜å‚¨åœ¨æœ¬åœ°
- ä¸æ”¶é›†ç”¨æˆ·æ•°æ®
- ä¸ä¸Šä¼ åˆ°äº‘ç«¯

### æƒé™ç®¡ç†
- æ–‡ä»¶æ“ä½œéœ€è¦ç”¨æˆ·æˆæƒ
- å‰ªè´´æ¿è®¿é—®éœ€è¦ç”¨æˆ·æˆæƒ
- ç½‘ç»œè¯·æ±‚ä»…ç”¨äº AI API è°ƒç”¨

---

## ğŸ› å·²çŸ¥é—®é¢˜ä¸é™åˆ¶

### 1. Live2D å…¼å®¹æ€§
- éƒ¨åˆ†æ—§ç‰ˆ Live2D æ¨¡å‹å¯èƒ½ä¸å…¼å®¹
- éœ€è¦æ‰‹åŠ¨è°ƒæ•´åŠ¨ç”»æ˜ å°„è¡¨

### 2. è¯­éŸ³è¯†åˆ«
- Web Speech API ä¾èµ–æµè§ˆå™¨æ”¯æŒ
- éƒ¨åˆ†æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒ

### 3. è°ƒåº¦å™¨ç²¾åº¦
- Cron è¡¨è¾¾å¼ç²¾åº¦ä¸ºåˆ†é’Ÿçº§
- ä¸æ”¯æŒç§’çº§ç²¾åº¦

### 4. Agent å·¥å…·é™åˆ¶
- æ–‡ä»¶æ“ä½œä»…é™ç”¨æˆ·ç›®å½•
- ç½‘ç»œè¯·æ±‚å¯èƒ½è¢«é˜²ç«å¢™æ‹¦æˆª

---

## ğŸ—ºï¸ æœªæ¥è§„åˆ’

### Phase 1: MVP æ‰©å±•ï¼ˆå·²å®Œæˆï¼‰
- âœ… åŸºç¡€å±æ€§ç³»ç»Ÿï¼ˆmoodã€energyã€intimacyï¼‰
- âœ… ç‚¹å‡»äº’åŠ¨ç³»ç»Ÿï¼ˆpetã€feedã€playï¼‰
- âœ… å¿ƒæƒ…é©±åŠ¨è¡¨æƒ…åˆ‡æ¢

### Phase 2: å¢å¼ºç•™å­˜ï¼ˆè¿›è¡Œä¸­ï¼‰
- âœ… æˆé•¿é˜¶æ®µç³»ç»Ÿï¼ˆSTRANGERã€FRIENDã€SOULMATEï¼‰
- âœ… æ™ºèƒ½æé†’ä»»åŠ¡
- âœ… æ¯æ—¥äº’åŠ¨ç»Ÿè®¡
- âœ… æˆå°±ç³»ç»Ÿ

### Phase 3: å·®å¼‚åŒ–åŠŸèƒ½ï¼ˆè§„åˆ’ä¸­ï¼‰
- ğŸ”² AI åä½œå°ä»»åŠ¡
- ğŸ”² èŠ‚æ—¥/å­£èŠ‚ä¸»é¢˜çš®è‚¤
- ğŸ”² å¤šå® ç‰©ç³»ç»Ÿ
- ğŸ”² ç¤¾åŒºåˆ†äº«åŠŸèƒ½

---

## ğŸ“š å‚è€ƒèµ„æ–™

### æŠ€æœ¯æ–‡æ¡£
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Zustand æ–‡æ¡£](https://zustand-demo.pmnd.rs/)
- [LangGraph æ–‡æ¡£](https://langchain-ai.github.io/langgraph/)
- [Live2D Cubism SDK](https://www.live2d.com/sdk/)

### è®¾è®¡å‚è€ƒ
- QQ å® ç‰©ç©æ³•åˆ†æ
- Tamagotchi å…»æˆæœºåˆ¶
- Animal Crossing ç¤¾äº¤ç³»ç»Ÿ

---

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### PR è§„èŒƒ

- PR æè¿°éœ€åŒ…å«ï¼šå˜æ›´æ‘˜è¦ã€å½±å“èŒƒå›´ã€éªŒè¯æ–¹å¼
- ç•Œé¢æ”¹åŠ¨éœ€é™„å‰åå¯¹æ¯”æˆªå›¾
- ä¾èµ–å‡çº§éœ€è¯´æ˜åŠ¨æœºä¸å›æ»šæ–¹æ¡ˆ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- GitHub Issues: [æäº¤ Issue](https://github.com/your-repo/ai-desktop-pet/issues)
- Email: your-email@example.com

---

**æœ€åæ›´æ–°**: 2025-12-28
