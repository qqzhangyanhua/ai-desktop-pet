<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tauri + React + Typescript</title>
    <style>
      html, body {
        background: transparent !important;
        background-color: transparent !important;
      }
    </style>
  </head>

  <body style="background: transparent !important; background-color: transparent !important;">
    <div id="root"></div>
    
    <!-- üî• Âú®Ê®°ÂùóÂä†ËΩΩÂâçÁ´ãÂç≥Êã¶Êà™ consoleÔºå‰øùÂ≠òÊâÄÊúâÊó©ÊúüÊó•Âøó -->
    <script>
      // ‰øùÂ≠òÂéüÂßã console ÊñπÊ≥ï
      window.__ORIGINAL_CONSOLE__ = {
        log: console.log.bind(console),
        warn: console.warn.bind(console),
        error: console.error.bind(console),
      };
      
      // ‰øùÂ≠òÊó©ÊúüÊó•Âøó
      window.__EARLY_LOGS__ = [];
      
      // Êã¶Êà™ console ÊñπÊ≥ï
      console.log = function() {
        window.__ORIGINAL_CONSOLE__.log.apply(console, arguments);
        window.__EARLY_LOGS__.push({
          level: 'log',
          time: new Date().toLocaleTimeString(),
          args: Array.from(arguments).map(function(a) {
            return typeof a === 'object' ? JSON.stringify(a) : String(a);
          }).join(' ')
        });
      };
      
      console.warn = function() {
        window.__ORIGINAL_CONSOLE__.warn.apply(console, arguments);
        window.__EARLY_LOGS__.push({
          level: 'warn',
          time: new Date().toLocaleTimeString(),
          args: Array.from(arguments).map(function(a) {
            return typeof a === 'object' ? JSON.stringify(a) : String(a);
          }).join(' ')
        });
      };
      
      console.error = function() {
        window.__ORIGINAL_CONSOLE__.error.apply(console, arguments);
        window.__EARLY_LOGS__.push({
          level: 'error',
          time: new Date().toLocaleTimeString(),
          args: Array.from(arguments).map(function(a) {
            return typeof a === 'object' ? JSON.stringify(a) : String(a);
          }).join(' ')
        });
      };
      
      console.log('[HTML] üöÄ Êó•ÂøóÊã¶Êà™Âô®Â∑≤ÂêØÂä®');
      console.log('[HTML] ÁéØÂ¢É:', window.location.href);
    </script>
    
    <!-- üî• Âä†ËΩΩ Cubism 2 SDK polyfill - oh-my-live2d/pixi-live2d-display ÈúÄË¶ÅËøô‰∫õÂÖ®Â±ÄÂèòÈáè -->
    <script>
      // ÂÆåÊï¥ÁöÑ Cubism 2 SDK polyfill
      // pixi-live2d-display ‰ºöÊó†Êù°‰ª∂Ê£ÄÊü•Ëøô‰∫õÂèòÈáèÔºåÂç≥‰ΩøÂè™Áî® Cubism 3/4 Ê®°Âûã
      console.log('[HTML] ÂàõÂª∫ÂÆåÊï¥ÁöÑ Cubism 2 SDK polyfill');
      
      // Live2D Ê†∏ÂøÉ
      window.Live2D = window.Live2D || {
        init: function() {},
        dispose: function() {},
        setGL: function() {},
        getError: function() { return 0; },
        getPlatformVersion: function() { return 0; }
      };
      
      // Live2DModelWebGL
      window.Live2DModelWebGL = window.Live2DModelWebGL || function() {};
      window.Live2DModelWebGL.prototype = window.Live2DModelWebGL.prototype || {
        setGL: function() {},
        loadModel: function() {},
        getCanvasWidth: function() { return 0; },
        getCanvasHeight: function() { return 0; },
        setParamFloat: function() {},
        addToParamFloat: function() {},
        multParamFloat: function() {},
        getParamFloat: function() { return 0; },
        setPartsOpacity: function() {},
        getPartsOpacity: function() { return 1; },
        getDrawDataIndex: function() { return 0; },
        getDrawData: function() { return null; },
        getTransformedPoints: function() { return []; },
        getIndexArray: function() { return []; },
        draw: function() {},
        update: function() {},
        getParamIndex: function() { return 0; },
        getPartsDataIndex: function() { return 0; }
      };
      
      // Motion Áõ∏ÂÖ≥
      window.Live2DMotion = window.Live2DMotion || function() {};
      window.Live2DMotion.loadMotion = function() { return new window.Live2DMotion(); };
      window.Live2DMotion.prototype = {
        updateParam: function() {},
        setFadeIn: function() {},
        setFadeOut: function() {},
        isFinished: function() { return true; }
      };
      
      window.AMotion = window.AMotion || function() {};
      window.AMotion.prototype = {
        setFadeIn: function() {},
        setFadeOut: function() {},
        updateParam: function() { return true; }
      };
      
      window.MotionQueueManager = window.MotionQueueManager || function() {};
      window.MotionQueueManager.prototype = {
        startMotion: function() { return 0; },
        stopAllMotions: function() {},
        isFinished: function() { return true; },
        update: function() { return true; }
      };
      
      // Physics Áõ∏ÂÖ≥ - ËøôÊòØÂØºËá¥ÂΩìÂâçÈîôËØØÁöÑÂéüÂõ†
      window.PhysicsHair = window.PhysicsHair || function() {};
      window.PhysicsHair.Src = { SRC_TO_X: 0, SRC_TO_Y: 1, SRC_TO_G_ANGLE: 2 };
      window.PhysicsHair.Target = { TARGET_FROM_ANGLE: 0, TARGET_FROM_ANGLE_V: 1 };
      window.PhysicsHair.prototype = {
        setup: function() {},
        update: function() {},
        addSrcParam: function() {},
        addTargetParam: function() {}
      };
      
      // PartsData
      window.PartsData = window.PartsData || function() {};
      window.PartsData.prototype = {
        getPartsDataIndex: function() { return 0; }
      };
      
      // Expression
      window.L2DExpressionMotion = window.L2DExpressionMotion || function() {};
      window.L2DExpressionMotion.prototype = {
        setFadeIn: function() {},
        setFadeOut: function() {},
        updateParam: function() {}
      };
      
      // Pose
      window.L2DPose = window.L2DPose || function() {};
      window.L2DPose.load = function() { return new window.L2DPose(); };
      window.L2DPose.prototype = {
        updateParam: function() {}
      };
      
      // TargetPoint
      window.L2DTargetPoint = window.L2DTargetPoint || function() {};
      window.L2DTargetPoint.prototype = {
        update: function() {},
        getX: function() { return 0; },
        getY: function() { return 0; },
        setPoint: function() {}
      };
      
      // ViewMatrix
      window.L2DViewMatrix = window.L2DViewMatrix || function() {};
      window.L2DViewMatrix.prototype = {
        getArray: function() { return [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1]; },
        setScreenRect: function() {},
        getScreenLeft: function() { return -1; },
        getScreenRight: function() { return 1; },
        getScreenTop: function() { return 1; },
        getScreenBottom: function() { return -1; }
      };
      
      // ModelMatrix
      window.L2DModelMatrix = window.L2DModelMatrix || function() {};
      window.L2DModelMatrix.prototype = {
        setWidth: function() {},
        setHeight: function() {},
        setPosition: function() {},
        setCenterPosition: function() {},
        getArray: function() { return [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1]; }
      };
      
      // EyeBlink
      window.L2DEyeBlink = window.L2DEyeBlink || function() {};
      window.L2DEyeBlink.prototype = {
        setInterval: function() {},
        updateParam: function() {}
      };
      
      console.log('[HTML] ‚úì Cubism 2 SDK polyfill ÂàõÂª∫ÂÆåÊàê');
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
